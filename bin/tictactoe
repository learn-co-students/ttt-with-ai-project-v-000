#!/usr/bin/env ruby
require_relative '../config/environment'

def play_again?
  puts "\nDo you want to play again? (yes/no)"
  play_again = gets.strip.downcase
  if play_again == "yes" || play_again == "y"
    puts "Please choose the number of players for your game:\n\n",
         "\t0, 1, or 2\n\n"
    user_input = gets.strip
  elsif play_again == "no" || play_again == "n"
    puts "\n"
    puts "XOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXO"
    puts "O      Thanks for playing Tic Tac Toe!     X"
    puts "XOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXO"
    exit
  else
    play_again?
  end
end


  puts "\e[H\e[2J"
  puts "XOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXO"
  puts "O                                          X"
  puts "X       Welcome to Tic Tac Toe!!           O"
  puts "O                                          X"
  puts "XOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXO\n\n"

  puts "Please enter your name: \n"
        name = gets.strip.capitalize
  puts "\n\nGreetings #{name}!\n",
       "How about a game of Tic-Tac-Toe?\n\n",
       "Please choose the number of players:\n\n",
       "\t0, 1, or 2\n\n",
       "\t(0) Computer mode (Computer vs. Computer)\n\n",
       "\t(1) One player mode. You will play against the computer.\n\n",
       "\t(2) Two player mode. There are 2 players and 'X' will go first.\n\n",
       "\t(q) Quit/Exit the program\n\n",
       "Please make a selection:"

       user_input = gets.strip.downcase

  case user_input
  when "0"
     Game.new(Player::Computer.new("X"), Player::Computer.new("O")).play
  when "1"
     Game.new( Player::Human.new("X"), Player::Computer.new("O")).play
  when "2"
     Game.new(player_1 = Player::Human.new("X"), player_2 = Player::Human.new("O")).play
  when "q"
    puts "\n"
    puts "XOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXO"
    puts "O      Thanks for playing Tic Tac Toe!     X"
    puts "XOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXOXO"
    exit
  end

  game = Game.new
  until game.won?
    play_again?
    game.play
  end
