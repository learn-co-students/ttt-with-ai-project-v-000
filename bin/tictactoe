#!/usr/bin/env ruby

require_relative '../config/environment'

  puts "Welcome to Tic-Tac-Toe!"
  puts ""
  puts "How many human players? (0-2)"
  players = gets.strip

    case players # Number of human players
    when "0" # Computer plays itself
      puts "You have chosen for the computer to play itself"
      puts "Do you want a random AI or unbeatable AI?"
      puts "Choose 1 for random, 2 for unbeatable"
      input = gets.strip
      case input
      when "1"
        game = Game.new(Player::Computer.new("X"), Player::Computer.new("O"))
        game.play
      when "2"
        game = Game.new(Player::Joshua.new("X"), Player::Joshua.new("O"))
        game.play
      when "wargames"
        100.times do
          game = Game.new(Player::Warshua.new("X"), Player::Warshua.new("O"))
          game.wargames
        end
        "\033[1;40;34mSTRANGE GAME.\n\033[0m".each_char do |c|
          putc c ; sleep 0.05; $stdout.flush
        end
        sleep 0.5
        "\033[1;40;34mTHE ONLY WINNING MOVE IS NOT TO PLAY.\n\033[0m".each_char do |c|
          putc c ; sleep 0.05; $stdout.flush
        end
      else
        puts "Invalid entry... rebooting!"
        system "ruby bin/tictactoe"
      end

    when "1" # You play against the computer
      puts "You have chosen to play against the computer"
      puts "Would you like an easy or hard opponent?"
      cpu = gets.strip.downcase
      case cpu # Choose computer difficulty
      when "easy" # Computer randomly chooses 1-9 for its move
        puts "Will you be player 1 or player 2? (1-2)"
        input = gets.strip
        case input # Player 1 or 2 choice
        when "1"
          game = Game.new(Player::Human.new("X"), Player::Computer.new("O"))
          game.play
        when "2"
          game = Game.new(Player::Computer.new("X"), Player::Human.new("O"))
          game.play
        end
      when "hard" # Computer is unbeatable
        "GREETINGS PROFESSOR FALKEN.\n".each_char do |c|
          putc c ; sleep 0.05; $stdout.flush
        end
        sleep 0.5
        "SHALL WE PLAY A GAME?\n".each_char do |c|
          putc c ; sleep 0.05; $stdout.flush
        end
          input = gets.strip.downcase
          case input
          when "yes"
            game = Game.new(Player::Human.new("X"), Player::Joshua.new("O"))
            game.play
          when "y"
            game = Game.new(Player::Human.new("X"), Player::Joshua.new("O"))
            game.play
          else
            "THAT WAS A RHETORICAL QUESTION.\n".each_char do |c|
              putc c ; sleep 0.05; $stdout.flush
            end
            game = Game.new(Player::Joshua.new("X"), Player::Human.new("O"))
            game.play
          end
      end

    when "2" # You play against another person
      puts "You have chosen to play against another person"
      game = Game.new
      game.play
    else # You're bad at following instructions
      puts "Invalid entry... rebooting!"
      system "ruby bin/tictactoe"
    end
