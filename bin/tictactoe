#!/usr/bin/env ruby
require_relative '../config/environment'

class TicTacToe
  attr_accessor :game

  def initialize
    puts "Welcome to Tic Tac Toe!"
  end

  def intro
    input = ""
    until input.downcase == "no" || input.downcase == "n"
      puts "Would you like to play again?"
      input = gets.strip
      case input.downcase
      when "yes", "y", "yea", "always"
        game_start
      when "no", "n"
        puts "Ok, until next time..."
        puts "Goodbye!"
        exit
      when "wargames", "easter egg"
        wargames
      else
        puts "I don't recognize that response. Please try again."
        intro
      end
    end
  end

  def game_start
    #game_input = 1
    puts "How many players will be playing today?"
    game_input = gets.strip.to_i
    if game_input == 0
      game = Game.new(Players::Computer.new("X"), Players::Computer.new("O"))
      game.play
    elsif game_input == 1
      human_vs_computer
    elsif game_input == 2
      game = Game.new(Players::Human.new("X"), Players::Human.new("O"))
      game.play
    elsif game_input > 2
      puts "Please choose a number between 0 and 2."
      game_start
    end
  end

  def human_vs_computer
    puts "Would you like to go first or second?"
    position_input = gets.strip
    if position_input == "first" || position_input == "1"
      game = Game.new(Players::Human.new("X"), Players::Computer.new("O"))
      game.play
    elsif position_input == "second" || position_input == "2"
      game = Game.new(Players::Computer.new("X"), Players::Human.new("O"))
      game.play
    else
      puts "I don't recognize that response. Please try again."
      human_vs_computer
    end
  end

  def wargames
    game = Game.new(Players::Computer.new("X"), Players::Computer.new("O"))
    100.times do
      game.play
    end
  end
end


TicTacToe.new.intro
